# Energy Signature Generator — demo

Исправления согласно правкам заказчика:

## 1) Реальный алгоритм `style` (ветвление рендера)
- **organica** — центральный глиф строится по *суперформуле* (superformula) с плавными кривыми. Фоновый слой — волны (синусоиды).
- **geometric** — глиф — *суперэллипс* (superellipse) + **лучи** из центра. Фоновый слой — концентрические многоугольные кольца.
- Защитные точки — **третий слой сверху**, с приглушёнными оттенками (низкая насыщенность, α≈0.28), чтобы «не конфетки», как просили.

## 2) Тест T3 по рендеру
T3 сравнивает `SHA-256(SVG)` для `organica` и `geometric` на одинаковых входах и убеждается, что:
- рендер проходит без ошибок;
- хэши **отличаются** (значит, стиль меняет именно алгоритм, а не только сид).

## 3) Канонический JSON рекурсивно
Реализована `canonicalizeDeep(obj)`:
- сортирует ключи **во всех вложенных объектах** (`inputs/layers/metadata/...`);
- `hashHex = SHA-256( canonicalStringifyDeep( jsonWithoutHashHex ) )` — вычисляется **от строки без `hashHex`**.

## 4) T1 считает хэш **полного SVG 512×512** с `viewBox` — ровно тот же конструктор, что и в основном рендере.

---

## Как пользоваться
1. Откройте `demo.html` в современном браузере.
2. Заполните поля и нажмите «Сгенерировать».
3. Экспортируйте PNG/SVG/JSON кнопками.
4. Для проверки нажмите «Запустить T1–T3». Результаты появятся внизу.

## Headless
Поддерживаются параметры:
```
?auto=1&fmt=svg|png|json
```
По умолчанию размер 512×512.

## Примечания по дизайну
- «Глиф играет»: в organica форма пластична за счёт параметров суперформулы; в geometric жёсткая геометрия + лучи.
- Цвета сдержанные: ограничена насыщенность, светлота и прозрачность защитных точек.
- Производительность: генерация уходит в десятки миллисекунд на обычном ноутбуке.

## Валидация JSON
Кнопка «Валидировать» принимает ранее экспортированный JSON и:
- пересчитывает `seedHex`;
- пересчитывает `hashHex` от глубокого канона без `hashHex`;
- выводит `PASS/FAIL`.


